<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-os/os" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">Requirements | RKE1 Enterprise</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://rke.docs.rancher.com/os"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Requirements | RKE1 Enterprise"><meta data-rh="true" name="description" content="Operating System"><meta data-rh="true" property="og:description" content="Operating System"><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://rke.docs.rancher.com/os"><link data-rh="true" rel="alternate" href="https://rke.docs.rancher.com/os" hreflang="en"><link data-rh="true" rel="alternate" href="https://rke.docs.rancher.com/os" hreflang="x-default"><link rel="preconnect" href="https://www.googletagmanager.com">
<script>window.dataLayer=window.dataLayer||[]</script>
<script>!function(e,t,a,n,g){e[n]=e[n]||[],e[n].push({"gtm.start":(new Date).getTime(),event:"gtm.js"});var m=t.getElementsByTagName(a)[0],r=t.createElement(a);r.async=!0,r.src="https://www.googletagmanager.com/gtm.js?id=GTM-57KS2MW",m.parentNode.insertBefore(r,m)}(window,document,"script","dataLayer")</script><link rel="stylesheet" href="/assets/css/styles.d476b531.css">
<script src="/assets/js/runtime~main.0cf4d5b1.js" defer="defer"></script>
<script src="/assets/js/main.d535c39c.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-57KS2MW" height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo-horizontal-rke.svg" alt="logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo-horizontal-rke.svg" alt="logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate"></b></a><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Quick Links</a><ul class="dropdown__menu"><li><a href="https://github.com/rancher/rke" target="_blank" rel="noopener noreferrer" class="dropdown__link">GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://github.com/rancher/rke1-docs" target="_blank" rel="noopener noreferrer" class="dropdown__link">Docs GitHub<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">More from SUSE</a><ul class="dropdown__menu"><li><a href="https://www.rancher.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__rancher">Rancher<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://elemental.docs.rancher.com/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__elemental">Elemental<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://epinio.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__epinio">Epinio<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://fleet.rancher.io/" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__fleet">Fleet<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><a href="https://harvesterhci.io" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__harvester">Harvester<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li><hr style="margin: 0.3rem 0;"></li><li><a href="https://opensource.suse.com" target="_blank" rel="noopener noreferrer" class="dropdown__link navbar__icon navbar__suse">More Projects...<svg width="12" height="12" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/">Overview of RKE</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/os">Requirements</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/installation">RKE Kubernetes Installation</a><button aria-label="Expand sidebar category &#x27;RKE Kubernetes Installation&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/upgrades">Upgrades</a><button aria-label="Expand sidebar category &#x27;Upgrades&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/kubeconfig">Kubeconfig File</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/etcd-snapshots">Backups and Disaster Recovery</a><button aria-label="Expand sidebar category &#x27;Backups and Disaster Recovery&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/cert-mgmt">Certificate Management</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/managing-clusters">Adding and Removing Nodes</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/config-options">Kubernetes Configuration Options</a><button aria-label="Expand sidebar category &#x27;Kubernetes Configuration Options&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/example-yamls">Example Cluster.ymls</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/troubleshooting">Troubleshooting</a><button aria-label="Expand sidebar category &#x27;Troubleshooting&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Requirements</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Requirements</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="operating-system">Operating System<a href="#operating-system" class="hash-link" aria-label="Direct link to Operating System" title="Direct link to Operating System">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="general-linux-requirements">General Linux Requirements<a href="#general-linux-requirements" class="hash-link" aria-label="Direct link to General Linux Requirements" title="Direct link to General Linux Requirements">​</a></h3>
<p>RKE runs on almost any Linux OS with Docker installed. For details on which OS and Docker versions were tested with each version, refer to the <a href="https://www.suse.com/suse-rke1/support-matrix/all-supported-versions/" target="_blank" rel="noopener noreferrer">support matrix</a>.</p>
<ul>
<li>
<p><a href="/config-options/nodes#ssh-users">SSH user</a> - The SSH user used for node access must be a member of the <code>docker</code> group on the node:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">usermod -aG docker &lt;user_name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>Users added to the <code>docker</code> group are granted effective root permissions on the host by means of the Docker API. Only choose a user that is intended for this purpose and has its credentials and access properly secured.</p></div></div>
<p>See <a href="https://docs.docker.com/install/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener noreferrer">Manage Docker as a non-root user</a> to see how you can configure access to Docker without using the <code>root</code> user.</p>
<ul>
<li>
<p>Swap should be disabled on any worker nodes</p>
</li>
<li>
<p>Please check the network plugin documentation for any additional requirements (for example, kernel modules)</p>
<ul>
<li><a href="https://docs.projectcalico.org/getting-started/kubernetes/requirements#kernel-dependencies" target="_blank" rel="noopener noreferrer">Calico</a></li>
<li><a href="https://github.com/flannel-io/flannel/tree/master/Documentation" target="_blank" rel="noopener noreferrer">Flannel</a></li>
<li>Canal (Combination Calico and Flannel)</li>
<li><a href="https://www.weave.works/docs/net/latest/install/installing-weave/" target="_blank" rel="noopener noreferrer">Weave</a> (Deprecated)</li>
</ul>
</li>
</ul>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>If you or your cloud provider are using a custom minimal kernel, some required (network) kernel modules might not be present.</p></div></div>
<ul>
<li>Following sysctl settings must be applied</li>
</ul>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">net.bridge.bridge-nf-call-iptables=1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="suse-linux-enterprise-server-sles--opensuse">SUSE Linux Enterprise Server (SLES) / openSUSE<a href="#suse-linux-enterprise-server-sles--opensuse" class="hash-link" aria-label="Direct link to SUSE Linux Enterprise Server (SLES) / openSUSE" title="Direct link to SUSE Linux Enterprise Server (SLES) / openSUSE">​</a></h3>
<p>If you are using SUSE Linux Enterprise Server or openSUSE follow the instructions below.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-upstream-docker">Using upstream Docker<a href="#using-upstream-docker" class="hash-link" aria-label="Direct link to Using upstream Docker" title="Direct link to Using upstream Docker">​</a></h4>
<p>If you are using upstream Docker, the package name is <code>docker-ce</code> or <code>docker-ee</code>. You can check the installed package by executing:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rpm -q docker-ce</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>When using the upstream Docker packages, please follow <a href="https://docs.docker.com/install/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener noreferrer">Manage Docker as a non-root user</a>.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="using-suseopensuse-packaged-docker">Using SUSE/openSUSE packaged docker<a href="#using-suseopensuse-packaged-docker" class="hash-link" aria-label="Direct link to Using SUSE/openSUSE packaged docker" title="Direct link to Using SUSE/openSUSE packaged docker">​</a></h4>
<p>If you are using the Docker package supplied by SUSE/openSUSE, the package name is <code>docker</code>. You can check the installed package by executing:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">rpm -q docker</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="adding-the-software-repository-for-docker">Adding the Software repository for docker<a href="#adding-the-software-repository-for-docker" class="hash-link" aria-label="Direct link to Adding the Software repository for docker" title="Direct link to Adding the Software repository for docker">​</a></h4>
<p>In SUSE Linux Enterprise Server 15 SP2 docker is found in the Containers module.
This module will need to be added before installing docker.</p>
<p>To list available modules you can run SUSEConnect to list the extensions and the activation command</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">node:~ # SUSEConnect --list-extensions</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">AVAILABLE EXTENSIONS AND MODULES</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Basesystem Module 15 SP2 x86_64 (Activated)</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    Deactivate with: SUSEConnect -d -p sle-module-basesystem/15.2/x86_64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Containers Module 15 SP2 x86_64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        Activate with: SUSEConnect -p sle-module-containers/15.2/x86_64</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Run this SUSEConnect command to activate the Containers module.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">node:~ # SUSEConnect -p sle-module-containers/15.2/x86_64</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Registering system to registration proxy https://rmt.seader.us</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Updating system details on https://rmt.seader.us ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Activating sle-module-containers 15.2 x86_64 ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-&gt; Adding service to system ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">-&gt; Installing release package ...</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Successfully registered system</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In order to run docker cli commands with your user then you need to add this user to the <code>docker</code> group.
It is preferred not to use the root user for this.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">usermod -aG docker &lt;user_name&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>To verify that the user is correctly configured, log out of the node and login using SSH or your preferred method, and execute <code>docker ps</code>:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">ssh user@node</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@node:~&gt; docker ps</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">CONTAINER ID        IMAGE       COMMAND             CREATED             STATUS              PORTS               NAMES</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">user@node:~&gt;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opensuse-microoskubic-atomic">openSUSE MicroOS/Kubic (Atomic)<a href="#opensuse-microoskubic-atomic" class="hash-link" aria-label="Direct link to openSUSE MicroOS/Kubic (Atomic)" title="Direct link to openSUSE MicroOS/Kubic (Atomic)">​</a></h3>
<p>Consult the project pages for openSUSE MicroOS and Kubic for installation</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="opensuse-microos">openSUSE MicroOS<a href="#opensuse-microos" class="hash-link" aria-label="Direct link to openSUSE MicroOS" title="Direct link to openSUSE MicroOS">​</a></h4>
<p>Designed to host container workloads with automated administration &amp; patching. Installing openSUSE MicroOS you get a quick, small environment for deploying Containers, or any other workload that benefits from Transactional Updates. As rolling release distribution the software is always up-to-date.
<a href="https://microos.opensuse.org" target="_blank" rel="noopener noreferrer">https://microos.opensuse.org</a></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="opensuse-kubic">openSUSE Kubic<a href="#opensuse-kubic" class="hash-link" aria-label="Direct link to openSUSE Kubic" title="Direct link to openSUSE Kubic">​</a></h4>
<p>Based on openSUSE MicroOS, designed with the same things in mind but is focused on being a Certified Kubernetes Distribution.
<a href="https://kubic.opensuse.org" target="_blank" rel="noopener noreferrer">https://kubic.opensuse.org</a>
Installation instructions:
<a href="https://kubic.opensuse.org/blog/2021-02-08-MicroOS-Kubic-Rancher-RKE/" target="_blank" rel="noopener noreferrer">https://kubic.opensuse.org/blog/2021-02-08-MicroOS-Kubic-Rancher-RKE/</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="red-hat-enterprise-linux-rhel--oracle-linux-ol--centos">Red Hat Enterprise Linux (RHEL) / Oracle Linux (OL) / CentOS<a href="#red-hat-enterprise-linux-rhel--oracle-linux-ol--centos" class="hash-link" aria-label="Direct link to Red Hat Enterprise Linux (RHEL) / Oracle Linux (OL) / CentOS" title="Direct link to Red Hat Enterprise Linux (RHEL) / Oracle Linux (OL) / CentOS">​</a></h3>
<p>If using Red Hat Enterprise Linux, Oracle Linux or CentOS, you cannot use the <code>root</code> user as <a href="/config-options/nodes#ssh-users">SSH user</a> due to <a href="https://bugzilla.redhat.com/show_bug.cgi?id=1527565" target="_blank" rel="noopener noreferrer">Bugzilla 1527565</a>.</p>
<p>Do not use the RHEL/CentOS packaged Docker because, in reality, it is using Podman and that breaks RKE installation. Instead, fetch Docker from upstream, for example by following this <a href="https://ranchermanager.docs.rancher.com/getting-started/installation-and-upgrade/installation-requirements/install-docker" target="_blank" rel="noopener noreferrer">link&#x27;s instructions</a>.</p>
<p>Please follow <a href="https://docs.docker.com/install/linux/linux-postinstall/#manage-docker-as-a-non-root-user" target="_blank" rel="noopener noreferrer">Manage Docker as a non-root user</a> to complete the installation.</p>
<div class="theme-admonition theme-admonition-note admonition_xJq3 alert alert--secondary"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M6.3 5.69a.942.942 0 0 1-.28-.7c0-.28.09-.52.28-.7.19-.18.42-.28.7-.28.28 0 .52.09.7.28.18.19.28.42.28.7 0 .28-.09.52-.28.7a1 1 0 0 1-.7.3c-.28 0-.52-.11-.7-.3zM8 7.99c-.02-.25-.11-.48-.31-.69-.2-.19-.42-.3-.69-.31H6c-.27.02-.48.13-.69.31-.2.2-.3.44-.31.69h1v3c.02.27.11.5.31.69.2.2.42.31.69.31h1c.27 0 .48-.11.69-.31.2-.19.3-.42.31-.69H8V7.98v.01zM7 2.3c-3.14 0-5.7 2.54-5.7 5.68 0 3.14 2.56 5.7 5.7 5.7s5.7-2.55 5.7-5.7c0-3.15-2.56-5.69-5.7-5.69v.01zM7 .98c3.86 0 7 3.14 7 7s-3.14 7-7 7-7-3.12-7-7 3.14-7 7-7z"></path></svg></span>note</div><div class="admonitionContent_BuS1"><p>In RHEL 8.4, two extra services are included on the NetworkManager: <code>nm-cloud-setup.service</code> and <code>nm-cloud-setup.timer</code>. These services add a routing table that interferes with the CNI plugin&#x27;s configuration. If these services are enabled, you must disable them using the command below, and then reboot the node to restore connectivity:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl disable nm-cloud-setup.service nm-cloud-setup.timer</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">reboot</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In addition, the default firewall settings of RHEL 8.4 prevent RKE1 pods from reaching out to Rancher to connect to the cluster agent. To allow Docker containers to reach out to the internet and connect to Rancher, make the following updates to the firewall settings:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">  firewall-cmd --zone=public  --add-masquerade --permanent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  firewall-cmd --reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="red-hat-atomic">Red Hat Atomic<a href="#red-hat-atomic" class="hash-link" aria-label="Direct link to Red Hat Atomic" title="Direct link to Red Hat Atomic">​</a></h3>
<p>Before trying to use RKE with Red Hat Atomic nodes, there are a couple of updates to the OS that need to occur in order to get RKE working.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openssh-version">OpenSSH version<a href="#openssh-version" class="hash-link" aria-label="Direct link to OpenSSH version" title="Direct link to OpenSSH version">​</a></h4>
<p>By default, Atomic hosts ship with OpenSSH 6.4, which doesn&#x27;t support SSH tunneling, which is a core RKE requirement. If you upgrade to the latest version of OpenSSH supported by Atomic, it will correct the SSH issue.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="creating-a-docker-group">Creating a Docker Group<a href="#creating-a-docker-group" class="hash-link" aria-label="Direct link to Creating a Docker Group" title="Direct link to Creating a Docker Group">​</a></h4>
<p>By default, Atomic hosts do not come with a Docker group. You can update the ownership of the Docker socket by enabling the specific user in order to launch RKE.</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># chown &lt;user&gt; /var/run/docker.sock</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="flatcar-container-linux">Flatcar Container Linux<a href="#flatcar-container-linux" class="hash-link" aria-label="Direct link to Flatcar Container Linux" title="Direct link to Flatcar Container Linux">​</a></h3>
<p>When using Flatcar Container Linux nodes, it is required to use the following configuration in the cluster configuration file:</p>
<div class="tabs-container tabList__CuJ"><ul role="tablist" aria-orientation="horizontal" class="tabs"><li role="tab" tabindex="0" aria-selected="true" class="tabs__item tabItem_LNqP tabs__item--active">Canal</li><li role="tab" tabindex="-1" aria-selected="false" class="tabs__item tabItem_LNqP">Calico</li></ul><div class="margin-top--md"><div role="tabpanel" class="tabItem_Ymn6"><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">rancher_kubernetes_engine_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">network</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> canal</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">canal_flex_volume_plugin_dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /opt/kubernetes/kubelet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugins/volume/exec/nodeagent~uds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">flannel_backend_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> vxlan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">kube-controller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">extra_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">flex-volume-plugin-dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /opt/kubernetes/kubelet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugins/volume/exec/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><div role="tabpanel" class="tabItem_Ymn6" hidden=""><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token key atrule">rancher_kubernetes_engine_config</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">network</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">plugin</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> calico</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">options</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">calico_flex_volume_plugin_dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /opt/kubernetes/kubelet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugins/volume/exec/nodeagent~uds</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">flannel_backend_type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> vxlan</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  </span><span class="token key atrule">services</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token key atrule">kube-controller</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">      </span><span class="token key atrule">extra_args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token key atrule">flex-volume-plugin-dir</span><span class="token punctuation" style="color:rgb(199, 146, 234)">:</span><span class="token plain"> /opt/kubernetes/kubelet</span><span class="token punctuation" style="color:rgb(199, 146, 234)">-</span><span class="token plain">plugins/volume/exec/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div></div></div>
<p>It is also required to enable the Docker service, you can enable the Docker service using the following command:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">systemctl enable docker.service</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="software">Software<a href="#software" class="hash-link" aria-label="Direct link to Software" title="Direct link to Software">​</a></h2>
<p>This section describes the requirements for Docker, Kubernetes, and SSH.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="openssh">OpenSSH<a href="#openssh" class="hash-link" aria-label="Direct link to OpenSSH" title="Direct link to OpenSSH">​</a></h3>
<p>In order to SSH into each node, OpenSSH 7.0+ must be installed on each node.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kubernetes">Kubernetes<a href="#kubernetes" class="hash-link" aria-label="Direct link to Kubernetes" title="Direct link to Kubernetes">​</a></h3>
<p>Refer to the <a href="https://github.com/rancher/rke/releases" target="_blank" rel="noopener noreferrer">RKE release notes</a> for the supported versions of Kubernetes.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="docker">Docker<a href="#docker" class="hash-link" aria-label="Direct link to Docker" title="Direct link to Docker">​</a></h3>
<p>Each Kubernetes version supports different Docker versions. The Kubernetes release notes contain the <a href="https://kubernetes.io/docs/setup/release/notes/#dependencies" target="_blank" rel="noopener noreferrer">current list</a> of validated Docker versions.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="installing-docker">Installing Docker<a href="#installing-docker" class="hash-link" aria-label="Direct link to Installing Docker" title="Direct link to Installing Docker">​</a></h3>
<p>Refer to <a href="https://ranchermanager.docs.rancher.com/getting-started/installation-and-upgrade/installation-requirements/install-docker" target="_blank" rel="noopener noreferrer">Installing Docker</a></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="checking-the-installed-docker-version">Checking the Installed Docker Version<a href="#checking-the-installed-docker-version" class="hash-link" aria-label="Direct link to Checking the Installed Docker Version" title="Direct link to Checking the Installed Docker Version">​</a></h3>
<p>Confirm that a Kubernetes supported version of Docker is installed on your machine, by running <code>docker version --format &#x27;{{.Server.Version}}&#x27;</code>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="hardware">Hardware<a href="#hardware" class="hash-link" aria-label="Direct link to Hardware" title="Direct link to Hardware">​</a></h2>
<p>This section describes the hardware requirements for the worker role, large Kubernetes clusters, and etcd clusters.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-role">Worker Role<a href="#worker-role" class="hash-link" aria-label="Direct link to Worker Role" title="Direct link to Worker Role">​</a></h3>
<p>The hardware requirements for nodes with the <code>worker</code> role mostly depend on your workloads. The minimum to run the Kubernetes node components is 1 CPU (core) and 1GB of memory.</p>
<p>Regarding CPU and memory, it is recommended that the different planes of Kubernetes clusters (etcd, controlplane, and workers) should be hosted on different nodes so that they can scale separately from each other.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="large-kubernetes-clusters">Large Kubernetes Clusters<a href="#large-kubernetes-clusters" class="hash-link" aria-label="Direct link to Large Kubernetes Clusters" title="Direct link to Large Kubernetes Clusters">​</a></h3>
<p>For hardware recommendations for large Kubernetes clusters, refer to the official Kubernetes documentation on <a href="https://kubernetes.io/docs/setup/best-practices/cluster-large/" target="_blank" rel="noopener noreferrer">building large clusters</a>.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="etcd-clusters">Etcd Clusters<a href="#etcd-clusters" class="hash-link" aria-label="Direct link to Etcd Clusters" title="Direct link to Etcd Clusters">​</a></h3>
<p>For hardware recommendations for etcd clusters in production, refer to the official <a href="https://etcd.io/docs/v3.5/op-guide/hardware/" target="_blank" rel="noopener noreferrer">etcd documentation</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ports">Ports<a href="#ports" class="hash-link" aria-label="Direct link to Ports" title="Direct link to Ports">​</a></h2>
<!-- -->
<!-- -->
<p><strong>RKE node:</strong>
Node that runs the <code>rke</code> commands</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="rke-node---outbound-rules">RKE node - Outbound rules<a href="#rke-node---outbound-rules" class="hash-link" aria-label="Direct link to RKE node - Outbound rules" title="Direct link to RKE node - Outbound rules">​</a></h3>
<table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>22</td><td>RKE node</td><td>Any node configured in Cluster Configuration File</td><td>SSH provisioning of node by RKE</td></tr><tr><td>TCP</td><td>6443</td><td>RKE node</td><td>Control plane nodes</td><td>Kubernetes API server</td></tr></tbody></table>
<p><strong>etcd nodes:</strong> Nodes with the role <strong>etcd</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="etcd-nodes---inbound-rules">etcd nodes - Inbound rules<a href="#etcd-nodes---inbound-rules" class="hash-link" aria-label="Direct link to etcd nodes - Inbound rules" title="Direct link to etcd nodes - Inbound rules">​</a></h3>
<table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>2376</td><td>Rancher nodes</td><td>Docker daemon TLS port used by Docker Machine (only needed when using Node Driver/Templates)</td></tr><tr><td>TCP</td><td>2379</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li></ul></td><td>etcd client requests</td></tr><tr><td>TCP</td><td>2380</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li></ul></td><td>etcd peer communication</td></tr><tr><td>UDP</td><td>8472</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>Canal/Flannel VXLAN overlay networking</td></tr><tr><td>TCP</td><td>9099</td><td><ul><li>etcd node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Canal/Flannel livenessProbe/readinessProbe</td></tr><tr><td>TCP</td><td>10250</td><td><ul><li>Metrics server communications with all nodes</li></ul></td><td>kubelet</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="etcd-nodes---outbound-rules">etcd nodes - Outbound rules<a href="#etcd-nodes---outbound-rules" class="hash-link" aria-label="Direct link to etcd nodes - Outbound rules" title="Direct link to etcd nodes - Outbound rules">​</a></h3>
<table><thead><tr><th>Protocol</th><th>Port</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>443</td><td><ul><li>Rancher nodes</li></ul></td><td>Rancher agent</td></tr><tr><td>TCP</td><td>379</td><td><ul><li>etcd nodes</li></ul></td><td>etcd client requests</td></tr><tr><td>TCP</td><td>2380</td><td><ul><li>etcd nodes</li></ul></td><td>etcd peer communication</td></tr><tr><td>TCP</td><td>6443</td><td><ul><li>controlplane nodes</li></ul></td><td>Kubernetes apiserver</td></tr><tr><td>UDP</td><td>8472</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>Canal/Flannel VXLAN overlay networking</td></tr><tr><td>TCP</td><td>9099</td><td><ul><li>etcd node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Canal/Flannel livenessProbe/readinessProbe</td></tr></tbody></table>
<p><strong>controlplane nodes:</strong> Nodes with the role <strong>controlplane</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="controlplane-nodes---inbound-rules">controlplane nodes - Inbound rules<a href="#controlplane-nodes---inbound-rules" class="hash-link" aria-label="Direct link to controlplane nodes - Inbound rules" title="Direct link to controlplane nodes - Inbound rules">​</a></h3>
<table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>80</td><td><ul><li>Any that consumes Ingress services</li></ul></td><td>Ingress controller (HTTP)</td></tr><tr><td>TCP</td><td>443</td><td><ul><li>Any that consumes Ingress services</li></ul></td><td>Ingress controller (HTTPS)</td></tr><tr><td>TCP</td><td>2376</td><td><ul><li>Rancher nodes</li></ul></td><td>Docker daemon TLS port used by Docker Machine (only needed when using Node Driver/Templates)</td></tr><tr><td>TCP</td><td>6443</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>Kubernetes apiserver</td></tr><tr><td>UDP</td><td>472</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>Canal/Flannel VXLAN overlay networking</td></tr><tr><td>TCP</td><td>9099</td><td><ul><li>controlplane node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Canal/Flannel livenessProbe/readinessProbe</td></tr><tr><td>TCP</td><td>10250</td><td><ul><li>Metrics server communications with all nodes</li></ul></td><td>kubelet</td></tr><tr><td>TCP</td><td>10254</td><td><ul><li>controlplane node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Ingress controller livenessProbe/readinessProbe</td></tr><tr><td>TCP/UDP</td><td>30000-32767</td><td><ul><li>Any source that consumes NodePort services</li></ul></td><td>NodePort port range</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="controlplane-nodes---outbound-rules">controlplane nodes - Outbound rules<a href="#controlplane-nodes---outbound-rules" class="hash-link" aria-label="Direct link to controlplane nodes - Outbound rules" title="Direct link to controlplane nodes - Outbound rules">​</a></h3>
<table><thead><tr><th>Protocol</th><th>Port</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>443</td><td><ul><li>Rancher nodes</li></ul></td><td>Rancher agent</td></tr><tr><td>TCP</td><td>2379</td><td><ul><li>etcd nodes</li></ul></td><td>etcd client requests</td></tr><tr><td>TCP</td><td>2380</td><td><ul><li>etcd nodes</li></ul></td><td>etcd peer communication</td></tr><tr><td>UDP</td><td>8472</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>Canal/Flannel VXLAN overlay networking</td></tr><tr><td>TCP</td><td>9099</td><td><ul><li>controlplane node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Canal/Flannel livenessProbe/readinessProbe</td></tr><tr><td>TCP</td><td>10250</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>kubelet</td></tr></tbody></table>
<p><strong>Worker nodes:</strong> Nodes with the role <strong>worker</strong></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-nodes---inbound-rules">Worker nodes - Inbound rules<a href="#worker-nodes---inbound-rules" class="hash-link" aria-label="Direct link to Worker nodes - Inbound rules" title="Direct link to Worker nodes - Inbound rules">​</a></h3>
<table><thead><tr><th>Protocol</th><th>Port</th><th>Source</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>22</td><td><ul><li><strong>Linux worker nodes only</strong></li><li>Any network that you want to be able to remotely access this node from.</li></ul></td><td>Remote access over SSH</td></tr><tr><td>TCP</td><td>3389</td><td><ul><li><strong>Windows worker nodes only</strong></li><li>Any network that you want to be able to remotely access this node from.</li></ul></td><td>Remote access over RDP</td></tr><tr><td>TCP</td><td>80</td><td><ul><li>Any that consumes Ingress services</li></ul></td><td>Ingress controller (HTTP)</td></tr><tr><td>TCP</td><td>443</td><td><ul><li>Any that consumes Ingress services</li></ul></td><td>Ingress controller (HTTPS)</td></tr><tr><td>TCP</td><td>2376</td><td><ul><li>Rancher nodes</li></ul></td><td>Docker daemon TLS port used by Docker Machine only needed when using Node Driver/Templates)</td></tr><tr><td>UDP</td><td>8472</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>Canal/Flannel VXLAN overlay networking</td></tr><tr><td>TCP</td><td>9099</td><td><ul><li>worker node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Canal/Flannel livenessProbe/readinessProbe</td></tr><tr><td>TCP</td><td>10250</td><td><ul><li>Metrics server communications with all nodes</li></ul></td><td>kubelet</td></tr><tr><td>TCP</td><td>10254</td><td><ul><li>worker node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Ingress controller livenessProbe/readinessProbe</td></tr><tr><td>TCP/UDP</td><td>30000-32767</td><td><ul><li>Any source that consumes NodePort services</li></ul></td><td>NodePort port range</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="worker-nodes---outbound-rules">Worker nodes - Outbound rules<a href="#worker-nodes---outbound-rules" class="hash-link" aria-label="Direct link to Worker nodes - Outbound rules" title="Direct link to Worker nodes - Outbound rules">​</a></h3>
<table><thead><tr><th>Protocol</th><th>Port</th><th>Destination</th><th>Description</th></tr></thead><tbody><tr><td>TCP</td><td>443</td><td><ul><li>Rancher nodes</li></ul></td><td>Rancher agent</td></tr><tr><td>TCP</td><td>6443</td><td><ul><li>controlplane nodes</li></ul></td><td>Kubernetes apiserver</td></tr><tr><td>UDP</td><td>8472</td><td><ul><li>etcd nodes</li><li>controlplane nodes</li><li>worker nodes</li></ul></td><td>Canal/Flannel VXLAN overlay networking</td></tr><tr><td>TCP</td><td>9099</td><td><ul><li>worker node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Canal/Flannel livenessProbe/readinessProbe</td></tr><tr><td>TCP</td><td>10254</td><td><ul><li>worker node itself (<a href="#information-on-local-node-traffic">local traffic</a>, not across nodes)</li></ul></td><td>Ingress controller livenessProbe/readinessProbe</td></tr></tbody></table>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="information-on-local-node-traffic">Information on local node traffic<a href="#information-on-local-node-traffic" class="hash-link" aria-label="Direct link to Information on local node traffic" title="Direct link to Information on local node traffic">​</a></h3>
<p>Kubernetes health checks (<code>livenessProbe</code> and <code>readinessProbe</code>) are executed on the host itself. On most nodes, this is allowed by default. When you have applied strict host firewall (i.e., <code>ptables</code>) policies on the node, or when you are using nodes that have multiple interfaces (multi-homed), this traffic gets blocked. In this case, you have to explicitly allow this traffic in your host firewall, or in case of public/private cloud hosted machines (i.e. AWS or OpenStack), in your security group configuration. Keep in mind that when using a security group as Source or Destination in your security group, that this only applies to the private interface of the nodes/instances.</p>
<p>If you are using an external firewall, make sure you have this port opened between the machine you are using to run <code>rke</code> and the nodes that you are going to use in the cluster.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opening-port-tcp6443-using-iptables">Opening port TCP/6443 using <code>iptables</code><a href="#opening-port-tcp6443-using-iptables" class="hash-link" aria-label="Direct link to opening-port-tcp6443-using-iptables" title="Direct link to opening-port-tcp6443-using-iptables">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Open TCP/6443 for all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iptables -A INPUT -p tcp --dport 6443 -j ACCEPT</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Open TCP/6443 for one specific IP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iptables -A INPUT -p tcp -s your_ip_here --dport 6443 -j ACCEPT</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="opening-port-tcp6443-using-firewalld">Opening port TCP/6443 using <code>firewalld</code><a href="#opening-port-tcp6443-using-firewalld" class="hash-link" aria-label="Direct link to opening-port-tcp6443-using-firewalld" title="Direct link to opening-port-tcp6443-using-firewalld">​</a></h3>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Open TCP/6443 for all</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">firewall-cmd --zone=public --add-port=6443/tcp --permanent</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">firewall-cmd --reload</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain"># Open TCP/6443 for one specific IP</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">firewall-cmd --permanent --zone=public --add-rich-rule=&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  rule family=&quot;ipv4&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  source address=&quot;your_ip_here/32&quot;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">  port protocol=&quot;tcp&quot; port=&quot;6443&quot; accept&#x27;</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">firewall-cmd --reload</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ssh-server-configuration">SSH Server Configuration<a href="#ssh-server-configuration" class="hash-link" aria-label="Direct link to SSH Server Configuration" title="Direct link to SSH Server Configuration">​</a></h2>
<p>Your SSH server system-wide configuration file, located at <code>/etc/ssh/sshd_config</code>, must include this line that allows TCP forwarding:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">AllowTcpForwarding yes</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/rancher/rke1-docs/edit/main/docs/os/os.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2024-02-07T22:10:23.000Z">Feb 7, 2024</time></b></span></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview of RKE</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/installation"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">RKE Kubernetes Installation</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#operating-system" class="table-of-contents__link toc-highlight">Operating System</a><ul><li><a href="#general-linux-requirements" class="table-of-contents__link toc-highlight">General Linux Requirements</a></li><li><a href="#suse-linux-enterprise-server-sles--opensuse" class="table-of-contents__link toc-highlight">SUSE Linux Enterprise Server (SLES) / openSUSE</a></li><li><a href="#opensuse-microoskubic-atomic" class="table-of-contents__link toc-highlight">openSUSE MicroOS/Kubic (Atomic)</a></li><li><a href="#red-hat-enterprise-linux-rhel--oracle-linux-ol--centos" class="table-of-contents__link toc-highlight">Red Hat Enterprise Linux (RHEL) / Oracle Linux (OL) / CentOS</a></li><li><a href="#red-hat-atomic" class="table-of-contents__link toc-highlight">Red Hat Atomic</a></li><li><a href="#flatcar-container-linux" class="table-of-contents__link toc-highlight">Flatcar Container Linux</a></li></ul></li><li><a href="#software" class="table-of-contents__link toc-highlight">Software</a><ul><li><a href="#openssh" class="table-of-contents__link toc-highlight">OpenSSH</a></li><li><a href="#kubernetes" class="table-of-contents__link toc-highlight">Kubernetes</a></li><li><a href="#docker" class="table-of-contents__link toc-highlight">Docker</a></li><li><a href="#installing-docker" class="table-of-contents__link toc-highlight">Installing Docker</a></li><li><a href="#checking-the-installed-docker-version" class="table-of-contents__link toc-highlight">Checking the Installed Docker Version</a></li></ul></li><li><a href="#hardware" class="table-of-contents__link toc-highlight">Hardware</a><ul><li><a href="#worker-role" class="table-of-contents__link toc-highlight">Worker Role</a></li><li><a href="#large-kubernetes-clusters" class="table-of-contents__link toc-highlight">Large Kubernetes Clusters</a></li><li><a href="#etcd-clusters" class="table-of-contents__link toc-highlight">Etcd Clusters</a></li></ul></li><li><a href="#ports" class="table-of-contents__link toc-highlight">Ports</a><ul><li><a href="#opening-port-tcp6443-using-iptables" class="table-of-contents__link toc-highlight">Opening port TCP/6443 using <code>iptables</code></a></li><li><a href="#opening-port-tcp6443-using-firewalld" class="table-of-contents__link toc-highlight">Opening port TCP/6443 using <code>firewalld</code></a></li></ul></li><li><a href="#ssh-server-configuration" class="table-of-contents__link toc-highlight">SSH Server Configuration</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 SUSE Rancher. All Rights Reserved.</div></div></div></footer></div>
</body>
</html>